<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="utf-8">
  <title>Marcin Kowalski: Lekcja5</title> 
  <meta name="description" content= "Postrona poświecona zagadnieniom takim jak algorytm fleurye'go">
  <meta name="author" content="Marcin Kowalski">
  <meta name="viewport" content = "width=device-width, initial-scale=1.0"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/2.7.10/cytoscape.min.js"></script>
  <link rel="stylesheet" href="css/lessons.css">
  <script src="js/Gfunc.js"></script>
</head>
<body><header id="H">
<a href="index.html">
	<h1>Marcin Kowalski</h1>
	<h1>Wybrane elementy teorii grafów</h1>
</a>
<h2>Lekcja5: Algorytm Fleury'ego</h2>
</header>
<nav>
	<div class="link">
	 <a href="index.html">Strona główna</a>
	</div>
	<div class="link">
	 <a href="lesson1.html">Lekcja 1</a>
	</div>
	<div class="link">
	 <a href="lesson2.html">Lekcja 2</a>
	</div>
	<div class="link">
	 <a href="lesson3.html">Lekcja 3</a>
	</div>
        <div class="link">
	 <a href="lesson4.html">Lekcja 4</a>
	</div>
	<div class="link">
	 <a href="lesson6.html">Lekcja 6</a>
	</div>
        <div class="link">
	 <a href="lesson7.html">Lekcja 7</a>
	</div>
	<div class="link">
	 <a href="lesson8.html">Lekcja 8</a>
	</div>
</nav>
 <article>
	<h2>Definicja 1</h2>
 	<section>
 	<div class="definition">
	 <h3>Most</h3>
 	<p>&nbsp;&nbsp;<b>Most</b> - krawędź w grafie, której usunięcie powoduje zwiększenie składowych spójności grafu.</p>
 	</div>
 	</section>
        <h2>Definicja 2</h2>
 	<section>
	<div class="row">
 	 <div class="definition">
	  <h3>Algorytm Fleury'ego - opis słowny</h3>
 	  <p>&nbsp;&nbsp;<b>Algorytm Fleury'ego</b> - Algorytmu Fleury'ego używamy do wyznaczenia cyklu Eulera w grafe Eulera. Wybierzmy dowolny wierzchołek o niezerowym stopniu. To będze początek
	  cyklu Eulera. Następnie wybieramy krawędź zaczynającą się w tym wierzchołku, która nie jest <b>mostem</b> chyba, że nie mamy innego wyboru. Zapamiętujemy wierzchołki krawędzi na stosie. 		  Przechodzimy tą krawędzią do kolejnego wierzchołka grafu, usuwając krawędź z grafu. Proces powtarzamy aż zabraknie krawędzi w grafie. W wyniku otrzymamy stos zawierający cykl Eulera.</p>
 	 </div>
         <div class="pseudo">
	   <h3>Algorytm Fleury'ego - pseudokod</h3>
	   <p> Dane: E-zbiór krawędzi grafu, S - pusty stos.</p>
	   <ol>
		<li>Pod v podstaw dowolny wierzchołek o stopniu niezerowym.</li>
		<li>Dodaj wierzchołek v do stosu S.</li>
		<li>Dopóki E ma elementy powtarzaj kroki 4-7,wpp przejdź do kroku 8.</li>
		<li>Znajdź v-u należące do E: v-u nie jest mostem.</li>
		<li>Jeśli znalazłeś takie v-u przejdź do kroku 6, wpp wybierz krawędź v-u, która jest mostem i także przejdź do kroku 6.</li>
		<li>Dodaj wierzchołek u do stosu S.</li>
		<li>Usuń krawędź v-u ze zbioru E.</li>
		<li>Wydrukuj zawartość stosu.</li>
	    </ol>
	 </div>
         </div>	
 	</section>
	<h2>Przykład</h2>
	<section id="first_example_section">
       </section>
	<button onclick="change_fluery_alg_ex()">Zmień przykład</button>
   <h2>Teraz sprawdź zdobytą wiedzę w serii ćwiczeń :</h2>
    <h2>Ćwiczenie 1</h2>
    <section>
     <div class="chart-container2" style="position: relative;height:500px;width:600px;">
   	<div class="cy"></div>
        <button onclick="change_fluery_alg_exc1()">Zmień ćwiczenie</button>
     </div>
     <div class="exercises">
      <h3>Ćwiczenie 1 - opis</h3>
      <p>W polu tekstowym poniżej wpisz opis algorytmu Fleury'ego dla danego grafu, podaj wierzchołek startowy, kolejne usuwane krawędzie i ostateczną postać cyklu Eulera. Dane te podawaj w następującym
	 formacie: v1,v1-v2 v2-v4 v4-v5 v5-v1,v1 v5 v4 v2 v1. Gdy będziesz gotowy nacisnij przycisk <b>check</b>, aby sprawdzić ćwiczenie.<br></p>
     </div>
     <div class="area">
    	 <textarea rows="7" cols="50"></textarea>
     </div>
     <button onclick="Check_ex1()">Sprawdź ćwiczenie</button>
    </section>
    <h2>Ćwiczenie 2</h2>
    <section>
     <div class="chart-container3" style="position: relative;height:500px;width:600px;">
   	<div class="cy"></div>
        <button onclick="change_fluery_alg_exc2()">Zmień ćwiczenie</button>
     </div>
     <div class="exercises">
      <h3>Ćwiczenie 2 - opis</h3>
       <p>W polu tekstowym poniżej wpisz opis algorytmu Fleury'ego dla danego grafu, podaj wierzchołek startowy, kolejne usuwane krawędzie i ostateczną postać cyklu Eulera. Dane te podawaj w następującym
	 formacie: v1,v1-v2 v2-v4 v4-v5 v5-v1,v1 v5 v4 v2 v1. Gdy będziesz gotowy nacisnij przycisk <b>check</b>, aby sprawdzić ćwiczenie.<br></p>
     </div>
     <div class="area">
    	 <textarea rows="7" cols="50"></textarea>
     </div>
     <button onclick="Check_ex2()">Sprawdź ćwiczenie</button>
    </section>
 </article>
<footer>
	<div class="return_to_top">
		<a href="#H">Do góry</a>
	</div>
</footer>
<script>
    var p=Math.floor((Math.random()*4)+4);
     var g=new Gfunc(p);
     var g2=new Gfunc(p);
     var g3=new Gfunc(p);
    change_fluery_alg_ex();
    change_fluery_alg_exc1();
    change_fluery_alg_exc2();
    //pomocnicze funkcje do sprawdzania ćwiczeń
    function Check_ex1(){
        var str=document.getElementsByClassName("area")[0];
        var str2=str.getElementsByTagName('textarea')[0].value;
        g2.check_fleury(str2);
    }
    function Check_ex2(){
        var str=document.getElementsByClassName("area")[1];
        var str2=str.getElementsByTagName('textarea')[0].value;
        g3.check_fleury(str2);
    }
    //funckja pozwala użytkownikowi zmienić przykład algorytmu fleury'ego
    function change_fluery_alg_ex(){
	var sect = document.getElementById("first_example_section");
	while(sect.firstChild){
		sect.removeChild(sect.firstChild);               //oczyszczenie strony z wykresóœw grafów
	}
	var j=0;
    	p=Math.floor((Math.random()*4)+4);
    	g=new Gfunc(p);
    	for(var i=0;i<p;i++){
       		g.addVertex(i);
    	}	
    	g.createRandomplaingraph();
    	while(g.check_euler_cycle()==0){
		p=Math.floor((Math.random()*4)+4);
		g=new Gfunc(p);
    		for(var i=0;i<p;i++){
      	 		g.addVertex(i);
    		}
		g.createRandomplaingraph();
    	}
        //teraz obliczam liczbę krawędzi w stworzonym grafie,będzie mi ona potrzebna do stworzenia przykładu
	var edg_number=0;
	for(var i=0;i<g.noOfVertices;i++){
		var list=g.AdjList.get(i);
		edg_number=edg_number+list.length;
	}
	edg_number=edg_number/2;
	//dorzucam odpowiednią liczbę wykresów grafu i opisów kroków algorytmu w miejsce przykładu na stronie
	sect=document.getElementById("first_example_section");
	var step=0;
	for(var i=0;i<=edg_number;i++){
		var container=document.createElement("div");
		container.setAttribute('class', 'chart-container');
		container.style.position="relative";
		container.style.height="500px";
		container.style.width="600px";
		sect.appendChild(container);

		var canv=document.createElement("div");
		canv.setAttribute('class','cy');
		container.appendChild(canv);

		var ex=document.createElement("div");
		ex.setAttribute('class', 'example');
		var h3=document.createElement("h3");
		var steps=String(step);
		var h3t=document.createTextNode("Krok "+steps);
		h3.appendChild(h3t);
		var ext=document.createElement("div");
		ext.setAttribute('class', 'example_text');

		ex.appendChild(h3);
		ex.appendChild(ext);
		sect.appendChild(ex);	
		step++;
        }
    	var ctx=[];         //tablica kontekstów dla chartów
        var ctx2=[];        //tablica kontekstów dla informacji o example
	for(var i=0;i<=edg_number;i++){
		var c1=document.getElementsByClassName("chart-container")[i];
		var c2=c1.getElementsByClassName("cy");
		ctx.push(c2);
		c1=document.getElementsByClassName("example")[i];
		c2=c1.getElementsByClassName("example_text")[0];
		ctx2.push(c2);
	}
    	g.setExampleTextFleuryalg(ctx,ctx2);
    }
    //funckja pozwala użytkownikowi zmienić ćwiczenie algorytmu fleury'ego
    function change_fluery_alg_exc1(){
	p=Math.floor((Math.random()*4)+4);
    	g2=new Gfunc(p);
    	for(var i=0;i<p;i++){
       		g2.addVertex(i);
   	 }
    	g2.createRandomplaingraph();
    	g2.graphtodata(0,0);
    	while(g2.check_euler_cycle()==0){
		p=Math.floor((Math.random()*4)+4);
		g2=new Gfunc(p);
    		for(var i=0;i<p;i++){
       			g2.addVertex(i);
    		}
		g2.createRandomplaingraph();
    		g2.graphtodata(0,0);
    	}                                   
    	var dataarray=g2.data;
    	var ctx2 = document.getElementsByClassName("chart-container2")[0];
	var ctx= ctx2.getElementsByClassName("cy");
	visual(ctx,dataarray,p);
    }
    //funckja pozwala użytkownikowi zmienić ćwiczenie algorytmu fleury'ego
    function change_fluery_alg_exc2(){
	p=Math.floor((Math.random()*4)+4);
    	g3=new Gfunc(p);
    	for(var i=0;i<p;i++){
      	 g3.addVertex(i);
   	}
    	g3.createRandomplaingraph();
    	g3.graphtodata(0,0);
    	while(g3.check_euler_cycle()==0){
		p=Math.floor((Math.random()*4)+4);
		g3=new Gfunc(p);
    		for(var i=0;i<p;i++){
       			g3.addVertex(i);
    		}
		g3.createRandomplaingraph();
    		g3.graphtodata(0,0);
    	}                                  
    	var dataarray=g3.data;
    	var ctx2 = document.getElementsByClassName("chart-container3")[0];
	var ctx= ctx2.getElementsByClassName("cy");
	visual(ctx,dataarray,p);
     }
</script>
</body>
</html>   
